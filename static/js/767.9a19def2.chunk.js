"use strict";(self.webpackChunkcra=self.webpackChunkcra||[]).push([[767,540],{9767:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var r=t(4165),a=t(5861),i=t(1413),o=t(2409),s=t(2791),l=t(3433),A=t(9439),p=function(e){return new Promise((function(n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return n([t.result,void 0])},t.onerror=function(e){return n([void 0,e])}}))},u=t(3965),d=t(8817),c=t(184);var f=function(e){var n=e.value,t=e.children,o=e.uploadProps,f=void 0===o?{}:o,m=e.onChange,x=e.beforeChange,h=e.showProgress,g=e.templateRender,w=(0,s.useState)(!1),v=(0,A.Z)(w,2),E=v[0],b=v[1],C=(0,s.useState)(),Z=(0,A.Z)(C,2),j=Z[0],k=Z[1],y=(0,s.useRef)(j),B=function(e,n){h&&y.current&&(y.current.forEach((function(t){t.uid===e&&(t.percent=n,t.status=100===n?"success":t.status)})),R((0,l.Z)(y.current)),null===m||void 0===m||m(y.current))},F=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a,i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.find((function(e){return e.uid===n})))||!a.originFileObj){e.next=12;break}return e.next=4,p(a.originFileObj);case 4:if(i=e.sent,o=(0,A.Z)(i,2),s=o[0],!o[1]){e.next=10;break}return e.abrupt("return",console.error("base64\u751f\u6210\u5931\u8d25"));case 10:a.url=s,a.thumbUrl=s;case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.file,a=n.fileList,i=!1,"removed"===t.status){e.next=5;break}return e.next=5,F(t.uid,a);case 5:if(!x){e.next=18;break}return b(!0),e.prev=7,e.next=10,x({file:t,fileList:a},B);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),i=!0;case 15:return e.prev=15,b(!1),e.finish(15);case 18:P(t.uid,a,i?"error":"done"),null===m||void 0===m||m(a);case 20:case"end":return e.stop()}}),e,null,[[7,12,15,18]])})));return function(n){return e.apply(this,arguments)}}(),P=function(e,n,t){n.forEach((function(n){n.uid===e&&(n.status=t)}))},I=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.file,(a=n.fileList).forEach((function(e){t.uid===e.uid&&(e.status="uploading")})),P(t.uid,a,"uploading"),R(a),y.current=a,e.next=7,N({file:t,fileList:a});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),R=function(e){y.current=e,k(e)};(0,s.useEffect)((function(){R(n)}),[n]);var z=(0,s.useMemo)((function(){return function(e){return"function"===typeof e}(t)?t(E):t}),[t,E]);return(0,c.jsx)(u.Z,(0,i.Z)((0,i.Z)({fileList:j,beforeUpload:function(){return!1},disabled:E,onChange:I},f),{},{itemRender:g||function(e,n){return"uploading"===n.status&&h?(0,c.jsx)(d.Z,{percent:n.percent,type:"dashboard"}):e},children:z}))},m=function(e){var n=e.formItemProps,t=void 0===n?{}:n,r=e.name,a=e.label,s=e.children,l=e.uploadProps,A=void 0===l?{}:l;return(0,c.jsx)(o.Z.Item,(0,i.Z)((0,i.Z)({},t),{},{name:r,label:a,children:(0,c.jsx)(f,(0,i.Z)((0,i.Z)({},A),{},{children:s}))}))},x=t(390),h=t(9489),g=t(9660),w=t(4571),v=t(3465),E=t(3876),b=t(2622),C=t(2365),Z=t(5701),j=t.n(Z),k=t(8236),y=t.n(k),B=t(6080),F=t.n(B),N=t(6850),P=t.n(N),I=t(7182),R=t.n(I),z=t(9213),D=t.n(z),S=t(396),O={};O.styleTagTransform=D(),O.setAttributes=P(),O.insert=F().bind(null,"head"),O.domAPI=y(),O.insertStyleElement=R();j()(S.Z,O),S.Z&&S.Z.locals&&S.Z.locals;function L(e){var n={fontSize:"56px"};return{"application/zip":(0,c.jsx)(h.Z,{style:n}),"application/pdf":(0,c.jsx)(g.Z,{style:n}),"video/mp4":(0,c.jsx)(w.Z,{style:n}),"audio/mpeg":(0,c.jsx)(v.Z,{style:n})}[e]||(0,c.jsx)(E.Z,{style:n})}function T(e){var n,t=e.file,r=e.actions,a=e.className,i=void 0===a?"":a;return(0,c.jsxs)("div",{className:"upload-template-v1 ".concat(i),children:[(0,c.jsxs)("div",{className:"upload-template-wrap  ".concat("error"===t.status?"upload-error-wrap":""),children:[(0,c.jsxs)("div",{className:"file-info-content",children:[t.url&&null!==(n=t.type)&&void 0!==n&&n.startsWith("image")?(0,c.jsx)(x.Z,{src:t.url}):L(t.type||""),(0,c.jsxs)("div",{className:"file-info-wrap",children:[(0,c.jsx)("p",{className:"file-name",title:t.name,children:t.name}),(0,c.jsxs)("span",{className:"file-size",children:[((t.size||0)/1e3).toFixed(2),"K"]})]})]}),(0,c.jsx)("div",{className:"file-action-content",children:(0,c.jsxs)("div",{children:[(0,c.jsx)(b.Z,{style:{fontSize:"18px",marginRight:8},onClick:r.remove}),(0,c.jsx)(C.Z,{style:{fontSize:"18px"},onClick:r.download})]})})]}),(0,c.jsx)("div",{className:"upload-template-progress-mask",style:{display:"uploading"===t.status?"block":"none"},children:(0,c.jsxs)("div",{className:"progress-wrap",children:[(0,c.jsx)("div",{className:"progress",style:{width:"".concat(t.percent,"%")}}),(0,c.jsx)("div",{className:"progress-bar"})]})})]})}var U=t(544),Y=t(419),M=t(9389),Q=t(7309);t(8540);function q(){var e=function(e,n){var t=new FormData;return t.append("attachmentFile",e),(0,U.W)({data:t,method:"POST",onUploadProgress:function(e){n(Math.floor(e.loaded/e.total*100))},url:"/gateway/admin/collection/pd/dataUpload/uploadFileNotSaveAttachmentFile"})},n=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t,a){var i,o,s;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.file,o=t.fileList,"removed"!==i.status){n.next=3;break}return n.abrupt("return");case 3:if((new FormData).append("attachmentFile",i.originFileObj||i),!(s=o.find((function(e){return e.uid===i.uid})))){n.next=16;break}return n.prev=7,n.next=10,e(s.originFileObj||i,(function(e){a(i.uid,e)}));case 10:Y.ZP.success("\u4e0a\u4f20\u6210\u529f"),n.next=16;break;case 13:throw n.prev=13,n.t0=n.catch(7),new Error("\u4e0a\u4f20\u5931\u8d25");case 16:case"end":return n.stop()}}),n,null,[[7,13]])})));return function(e,t){return n.apply(this,arguments)}}(),t={showProgress:!0,beforeChange:n,templateRender:function(e,n,t,r){return(0,c.jsx)(T,{file:n,fileList:t,actions:r})},uploadProps:{className:"upload-list-wrap"}};return(0,c.jsx)("div",{style:{padding:16},children:(0,c.jsxs)(o.Z,{children:[(0,c.jsx)(o.Z.Item,{name:"number",label:"\u59d3\u540d",rules:[{required:!0}],children:(0,c.jsx)(M.Z,{})}),(0,c.jsx)(m,{name:"file",label:"\u6587\u4ef6",formItemProps:{rules:[{required:!0}]},uploadProps:t,children:function(e){return(0,c.jsx)(Q.Z,{loading:e,children:"\u4e0a\u4f20\u6587\u4ef6"})}}),(0,c.jsx)(o.Z.Item,{children:(0,c.jsx)(Q.Z,{htmlType:"submit",children:"\u63d0\u4ea4"})})]})})}},396:function(e,n,t){var r=t(6657),a=t.n(r),i=t(2182),o=t.n(i)()(a());o.push([e.id,".upload-template-v1 {\n  position: relative;\n  max-width: 100%;\n  max-width: 400px;\n  height: 98px;\n  margin-top: 15px;\n}\n.upload-template-v1 .upload-error-wrap {\n  border: 1px solid red;\n}\n.upload-template-v1 .upload-error-wrap .file-name {\n  color: red !important;\n}\n.upload-template-v1 .upload-template-wrap {\n  padding: 16px;\n  border-radius: 8px;\n  height: 100%;\n  background: linear-gradient(219deg, #F9FAFD 0%, #F0F0F4 100%);\n  display: flex;\n  justify-content: space-between;\n}\n.upload-template-v1 .upload-template-wrap > .file-info-content {\n  display: flex;\n  align-items: center;\n}\n.upload-template-v1 .upload-template-wrap > .file-info-content .ant-image {\n  width: 56px;\n}\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap {\n  flex: 1;\n  padding: 0px 10px;\n}\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap .file-name {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  width: 200px;\n  white-space: nowrap;\n  font-size: 16px;\n  font-weight: 400;\n  color: #28323C;\n}\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap .file-size {\n  color: #9CA8BA;\n  font-size: 14px;\n}\n.upload-template-v1 .upload-template-wrap > .file-action-content {\n  flex: 1;\n  max-width: 50px;\n  min-width: 50px;\n  flex-grow: 0;\n}\n.upload-template-v1 .upload-template-progress-mask {\n  height: 100%;\n  width: 100%;\n  top: 0px;\n  position: absolute;\n  border-radius: 8px;\n  overflow: hidden;\n}\n.upload-template-v1 .upload-template-progress-mask .progress-wrap {\n  height: 100%;\n  display: flex;\n}\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress-bar {\n  flex: 1;\n  background: rgba(188, 188, 188, 0.4);\n  height: 100%;\n}\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress,\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress-bar {\n  transition: width 0.1s linear;\n}\n","",{version:3,sources:["webpack://./src/components/FormUpload/Template/template.less"],names:[],mappings:"AAAA;EACE,kBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,gBAAA;AACF;AANA;EAOI,qBAAA;AAEJ;AATA;EASM,qBAAA;AAGN;AAZA;EAaI,aAAA;EACA,kBAAA;EACA,YAAA;EACA,6DAAA;EACA,aAAA;EACA,8BAAA;AAEJ;AApBA;EAoBM,aAAA;EACA,mBAAA;AAGN;AAxBA;EAuBQ,WAAA;AAIR;AA3BA;EA0BQ,OAAA;EACA,iBAAA;AAIR;AA/BA;EA+BU,uBAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,eAAA;EACA,gBAAA;EACA,cAAA;AAGV;AAxCA;EAwCU,cAAA;EACA,eAAA;AAGV;AA5CA;EA+CM,OAAA;EACA,eAAA;EACA,eAAA;EACA,YAAA;AAAN;AAlDA;EAuDI,YAAA;EACA,WAAA;EACA,QAAA;EACA,kBAAA;EACA,kBAAA;EACA,gBAAA;AAFJ;AA1DA;EA8DM,YAAA;EACA,aAAA;AADN;AA9DA;EAiEQ,OAAA;EACA,oCAAA;EACA,YAAA;AAAR;AAnEA;;EAsEQ,6BAAA;AACR",sourcesContent:[".upload-template-v1 {\n  position: relative;\n  max-width: 100%;\n  max-width: 400px;\n  height: 98px;\n  margin-top: 15px;\n  .upload-error-wrap {\n    border: 1px solid red;\n    .file-name {\n      color: red !important;\n    }\n  }\n  .upload-template-wrap {\n    padding: 16px;\n    border-radius: 8px;\n    height: 100%;\n    background: linear-gradient(219deg, #F9FAFD 0%, #F0F0F4 100%);\n    display: flex;\n    justify-content: space-between;\n    >.file-info-content {\n      display: flex;\n      align-items: center;\n      .ant-image {\n        width: 56px;\n      }\n      >.file-info-wrap {\n        flex: 1;\n        padding: 0px 10px;\n\n        .file-name {\n          // flex: 1;\n          text-overflow: ellipsis;\n          overflow: hidden;\n          width: 200px;\n          white-space: nowrap;\n          font-size: 16px;\n          font-weight: 400;\n          color: #28323C;\n        }\n        .file-size {\n          color: #9CA8BA;\n          font-size: 14px;\n        }\n      }\n    }\n    >.file-action-content {\n      // width: 80px;\n      flex: 1;\n      max-width: 50px;\n      min-width: 50px;\n      flex-grow: 0;\n      // flex-shrink: 0;\n    }\n  }\n  .upload-template-progress-mask {\n    height: 100%;\n    width: 100%;\n    top: 0px;\n    position: absolute;\n    border-radius: 8px;\n    overflow: hidden;\n    .progress-wrap {\n      height: 100%;\n      display: flex;\n      .progress-bar {\n        flex: 1;\n        background: rgba(188, 188, 188,.4);\n        height: 100%;\n      }\n      .progress, .progress-bar {\n        transition: width .1s linear;\n      }\n    }\n  }\n}\n\n"],sourceRoot:""}]),n.Z=o},849:function(e,n,t){var r=t(6657),a=t.n(r),i=t(2182),o=t.n(i)()(a());o.push([e.id,".upload-list-wrap .ant-upload-list {\n  display: flex;\n  flex-wrap: wrap;\n}\n.upload-list-wrap .ant-upload-list .upload-template-v1 {\n  margin-right: 15px;\n}\n","",{version:3,sources:["webpack://./src/pages/about/style.less"],names:[],mappings:"AAAA;EAEE,aAAA;EACA,eAAA;AAAF;AAHA;EAKI,kBAAA;AACJ",sourcesContent:[".upload-list-wrap {\n .ant-upload-list {\n  display: flex;\n  flex-wrap: wrap;\n  .upload-template-v1 {\n    margin-right: 15px;\n  }\n }\n}"],sourceRoot:""}]),n.Z=o},8540:function(e,n,t){t.r(n);var r=t(5701),a=t.n(r),i=t(8236),o=t.n(i),s=t(6080),l=t.n(s),A=t(6850),p=t.n(A),u=t(7182),d=t.n(u),c=t(9213),f=t.n(c),m=t(849),x={};x.styleTagTransform=f(),x.setAttributes=p(),x.insert=l().bind(null,"head"),x.domAPI=o(),x.insertStyleElement=d();a()(m.Z,x);n.default=m.Z&&m.Z.locals?m.Z.locals:void 0}}]);
//# sourceMappingURL=767.9a19def2.chunk.js.map