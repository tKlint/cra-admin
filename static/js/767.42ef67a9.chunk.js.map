{"version":3,"file":"static/js/767.42ef67a9.chunk.js","mappings":"8NAGaA,EAAmB,SAACC,GAC/B,OAAO,IAAIC,SAAQ,SAAAC,GACjB,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcL,GACrBG,EAAOG,OAAS,kBAAMJ,EAAQ,CAACC,EAAOI,YAAkBC,GAAY,EACpEL,EAAOM,QAAU,SAAAC,GAAK,OAAIR,EAAQ,MAAC,EAAQQ,GAAQ,CACrD,GACF,E,6BCwBA,IAmIA,EAnIwC,SAAAC,GACtC,IAAQC,EAA4FD,EAA5FC,MAAOC,EAAqFF,EAArFE,SAAQC,EAA6EH,EAA3EI,YAAAA,OAAW,IAAAD,EAAG,CAAC,EAACA,EAAEE,EAAyDL,EAAzDK,SAAUC,EAA+CN,EAA/CM,aAAcC,EAAiCP,EAAjCO,aAAcC,EAAmBR,EAAnBQ,eACjFC,GAAgCC,EAAAA,EAAAA,WAAS,GAAMC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAxCI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAC5BI,GAA0BL,EAAAA,EAAAA,YAAmBM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAtCE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GAChBG,GAAYC,EAAAA,EAAAA,QAAOH,GAMnBI,EAAiB,SAACC,EAAaC,GAC/BhB,GAAgBY,EAAUK,UAC5BL,EAAUK,QAAQC,SAAQ,SAAApC,GACpBA,EAAKiC,MAAQA,IACfjC,EAAKkC,QAAUA,EACflC,EAAKqC,OAAqB,MAAZH,EAAkB,UAAYlC,EAAKqC,OAErD,IACAC,GAAaC,EAAAA,EAAAA,GAAKT,EAAUK,UACpB,OAARnB,QAAQ,IAARA,GAAAA,EAAWc,EAAUK,SAEzB,EACMK,EAAa,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOZ,EAAaa,GAAiB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAP,EAAAA,EAAAA,KAAAQ,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACE,KAArDP,EAAaD,EAASS,MAAK,SAAAvD,GAAI,OAAIA,EAAKiC,MAAQA,CAAG,OACvCc,EAAWS,cAAa,CAAAJ,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,EACfvD,EAAiBgD,EAAWS,eAAe,KAAD,EAApD,GAAoDR,EAAAI,EAAAK,KAAAR,GAAA1B,EAAAA,EAAAA,GAAAyB,EAAA,GAA5DE,EAAGD,EAAA,IAAKA,EAAA,GACP,CAADG,EAAAE,KAAA,gBAAAF,EAAAM,OAAA,SACEC,QAAQjD,MAAM,mCAAa,QAEpCqC,EAAWG,IAAMA,EACjBH,EAAWa,SAAWV,EAAI,yBAAAE,EAAAS,OAAA,GAAAhB,EAAA,KAE7B,gBAVkBiB,EAAAC,GAAA,OAAAtB,EAAAuB,MAAA,KAAAC,UAAA,KAebC,EAAiB,eAAAC,GAAAzB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAwB,EAAAC,GAAA,IAAArE,EAAA8C,EAAAwB,EAAA,OAAA3B,EAAAA,EAAAA,KAAAQ,MAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,OACL,GADctD,EAAIqE,EAAJrE,KAAM8C,EAAQuB,EAARvB,SACnCwB,GAAS,EACO,YAAhBtE,EAAKqC,OAAoB,CAAAkC,EAAAjB,KAAA,eAAAiB,EAAAjB,KAAA,EACrBd,EAAcxC,EAAKiC,IAAKa,GAAU,KAAD,MAErC7B,EAAa,CAADsD,EAAAjB,KAAA,SACI,OAAlB7B,GAAY,GAAM8C,EAAAlB,KAAA,EAAAkB,EAAAjB,KAAA,GAEVrC,EAAa,CAAEjB,KAAAA,EAAM8C,SAAAA,GAAYd,GAAgB,KAAD,GAAAuC,EAAAjB,KAAA,iBAAAiB,EAAAlB,KAAA,GAAAkB,EAAAC,GAAAD,EAAA,SAEtDD,GAAS,EAAK,QAEK,OAFLC,EAAAlB,KAAA,GAEd5B,GAAY,GAAO8C,EAAAE,OAAA,YAGvBC,EAAc1E,EAAKiC,IAAKa,EAAUwB,EAAS,QAAU,QAC7C,OAARtD,QAAQ,IAARA,GAAAA,EAAW8B,GAAU,yBAAAyB,EAAAV,OAAA,GAAAO,EAAA,yBACtB,gBAjBsBO,GAAA,OAAAR,EAAAH,MAAA,KAAAC,UAAA,KAwBjBS,EAAgB,SAACzC,EAAaa,EAAwBT,GAC1DS,EAASV,SAAQ,SAAApC,GACXA,EAAKiC,MAAQA,IACfjC,EAAKqC,OAASA,EAElB,GACF,EAIMuC,EAAyC,eAAAC,GAAAnC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAkC,EAAAC,GAAA,IAAA/E,EAAA8C,EAAA,OAAAH,EAAAA,EAAAA,KAAAQ,MAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,OAQnB,OAR4BtD,EAAI+E,EAAJ/E,MAAM8C,EAAQiC,EAARjC,UACtDV,SAAQ,SAAA6C,GACXjF,EAAKiC,MAAQgD,EAAShD,MACxBgD,EAAS5C,OAAS,YAEtB,IACAqC,EAAc1E,EAAKiC,IAAKa,EAAU,aAClCR,EAAcQ,GACdhB,EAAUK,QAAUW,EAASkC,EAAA1B,KAAA,EACvBY,EAAkB,CAAElE,KAAAA,EAAM8C,SAAAA,IAAY,KAAD,mBAAAkC,EAAAnB,OAAA,GAAAiB,EAAA,KAC5C,gBAV8CI,GAAA,OAAAL,EAAAb,MAAA,KAAAC,UAAA,KAuBzC3B,EAAgB,SAACQ,GACrBhB,EAAUK,QAAUW,EACpBjB,EAASiB,EACX,GAEAqC,EAAAA,EAAAA,YAAU,WACR7C,EAAc1B,EAChB,GAAG,CAACA,IACJ,IAAMwE,GAAiBC,EAAAA,EAAAA,UAAQ,WAC7B,OA3GG,SAAuBxE,GAC5B,MAA2B,oBAAbA,CAChB,CAyGQyE,CAAczE,GACTA,EAASW,GAEXX,CACT,GAAG,CAACA,EAAUW,IACd,OACE+D,EAAAA,EAAAA,KAACC,EAAAA,GAAMC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACL3C,SAAUlB,EACV8D,aA1BmD,WACrD,OAAO,CACT,EAyBIC,SAAUnE,EACVR,SAAU4D,GACN7D,GAAW,IACf6E,WACEzE,GAEI,SAAC0E,EAAK7F,GACJ,MAAoB,cAAhBA,EAAKqC,QAA0BnB,GAC1BqE,EAAAA,EAAAA,KAACO,EAAAA,EAAQ,CAAC5D,QAASlC,EAAKkC,QAAS6D,KAAK,cAExCF,CACT,EACLhF,SAEAuE,IAGP,EC9IA,EAT8C,SAAAzE,GAC5C,IAAAqF,EAAwErF,EAAhEsF,cAAAA,OAAa,IAAAD,EAAG,CAAC,EAACA,EAAEE,EAA4CvF,EAA5CuF,KAAMC,EAAsCxF,EAAtCwF,MAAOtF,EAA+BF,EAA/BE,SAAQC,EAAuBH,EAArBI,YAAAA,OAAW,IAAAD,EAAG,CAAC,EAACA,EACnE,OACEyE,EAAAA,EAAAA,KAACa,EAAAA,EAAKC,MAAIZ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKQ,GAAa,IAAEC,KAAMA,EAAMC,MAAOA,EAAMtF,UACrD0E,EAAAA,EAAAA,KAACe,GAAOb,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK1E,GAAW,IAAAF,SAAGA,OAGjC,E,0MCRI0F,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKJ,KAAW,IAAQM,QAAS,IAAQA,OCFnD,SAASC,EAAgBC,GAC9B,IAAMC,EAAiC,CACrCC,SAAU,QAQZ,MAN4B,CAC1B,mBAAmB1B,EAAAA,EAAAA,KAAC2B,EAAAA,EAAe,CAACC,MAAOH,IAC3C,mBAAmBzB,EAAAA,EAAAA,KAAC6B,EAAAA,EAAe,CAACD,MAAOH,IAC3C,aAAazB,EAAAA,EAAAA,KAAC8B,EAAAA,EAAmB,CAACF,MAAOH,IACzC,cAAczB,EAAAA,EAAAA,KAAC+B,EAAAA,EAAa,CAACH,MAAOH,KAEXD,KAAiDxB,EAAAA,EAAAA,KAACgC,EAAAA,EAAgB,CAACJ,MAAOH,GACvG,CACe,SAASQ,EAAa7G,GAAwB,IAAD8G,EAClDzH,EAAkCW,EAAlCX,KAAM0H,EAA4B/G,EAA5B+G,QAAOC,EAAqBhH,EAAnBiH,UAAAA,OAAS,IAAAD,EAAG,GAAEA,EACrC,OACEE,EAAAA,EAAAA,MAAA,OAAKD,UAAS,sBAAAE,OAAwBF,GAAY/G,SAAA,EAChDgH,EAAAA,EAAAA,MAAA,OAAKD,UAAS,yBAAAE,OAA2C,UAAhB9H,EAAKqC,OAAqB,oBAAsB,IAAKxB,SAAA,EAC5FgH,EAAAA,EAAAA,MAAA,OAAKD,UAAU,oBAAmB/G,SAAA,CAC/Bb,EAAKkD,KAAgB,QAAbuE,EAAIzH,EAAK+F,YAAI,IAAA0B,GAATA,EAAWM,WAAW,UAAWxC,EAAAA,EAAAA,KAACyC,EAAAA,EAAK,CAACC,IAAKjI,EAAKkD,MAAU4D,EAAgB9G,EAAK+F,MAAQ,KACtG8B,EAAAA,EAAAA,MAAA,OAAKD,UAAU,iBAAgB/G,SAAA,EAC7B0E,EAAAA,EAAAA,KAAA,KAAGqC,UAAU,YAAYM,MAAOlI,EAAKkG,KAAKrF,SACvCb,EAAKkG,QAER2B,EAAAA,EAAAA,MAAA,QAAMD,UAAU,YAAW/G,SAAA,GAAIb,EAAKmI,MAAQ,GAAK,KAAMC,QAAQ,GAAG,cAGtE7C,EAAAA,EAAAA,KAAA,OAAKqC,UAAU,sBAAqB/G,UAClCgH,EAAAA,EAAAA,MAAA,OAAAhH,SAAA,EACE0E,EAAAA,EAAAA,KAAC8C,EAAAA,EAAc,CAAClB,MAAO,CAAEF,SAAU,OAAQqB,YAAa,GAAKC,QAASb,EAAQc,UAC9EjD,EAAAA,EAAAA,KAACkD,EAAAA,EAAgB,CAACtB,MAAO,CAAEF,SAAU,QAAUsB,QAASb,EAAQgB,oBAItEnD,EAAAA,EAAAA,KAAA,OACEqC,UAAU,gCACVT,MAAO,CAAEwB,QAAyB,cAAhB3I,EAAKqC,OAAyB,QAAU,QAASxB,UAEnEgH,EAAAA,EAAAA,MAAA,OAAKD,UAAU,gBAAe/G,SAAA,EAC5B0E,EAAAA,EAAAA,KAAA,OAAKqC,UAAU,WAAWT,MAAO,CAAEyB,MAAM,GAADd,OAAK9H,EAAKkC,QAAO,SACzDqD,EAAAA,EAAAA,KAAA,OAAKqC,UAAU,wBAKzB,C,8DC1De,SAASiB,IACtB,IAAMC,EAAa,SAAC9I,EAAc+I,GAChC,IAAMC,EAAO,IAAIC,SAEjB,OADAD,EAAKE,OAAO,iBAAkBlJ,IACvBmJ,EAAAA,EAAAA,GAAQ,CACbH,KAAAA,EACAI,OAAQ,OACRC,iBAAgB,SAACC,GACfP,EAASQ,KAAKC,MAAOF,EAAMG,OAASH,EAAMI,MAAS,KACrD,EACAxG,IAAK,2EAET,EACM0B,EAA8C,eAAAP,GAAA3B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAAJ,EAA2BT,GAAc,IAAAhC,EAAA8C,EAAAC,EAAA,OAAAJ,EAAAA,EAAAA,KAAAQ,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAAlB,GAAdtD,EAAIyC,EAAJzC,KAAM8C,EAAQL,EAARK,SAChD,YAAhB9C,EAAKqC,OAAoB,CAAAe,EAAAE,KAAA,eAAAF,EAAAM,OAAA,iBAKyC,IAFzD,IAAIuF,UACZC,OAAO,iBAAkBlJ,EAAKwD,eAAkBxD,KAC/C+C,EAAaD,EAASS,MAAK,SAAAoG,GAAO,OAAIA,EAAQ1H,MAAQjC,EAAKiC,GAAG,KACrD,CAADmB,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAE,KAAA,GAEJwF,EAAW/F,EAAWS,eAAkBxD,GAAiB,SAAAkC,GAC7DF,EAAehC,EAAKiC,IAAKC,EAC3B,IAAG,KAAD,GACF0H,EAAAA,GAAQC,QAAQ,4BAAQzG,EAAAE,KAAA,uBAAAF,EAAAC,KAAA,GAAAD,EAAAoB,GAAApB,EAAA,SAElB,IAAI0G,MAAM,4BAAQ,KAAD,oBAAA1G,EAAAS,OAAA,GAAAhB,EAAA,mBAG5B,gBAjBmDiB,EAAAC,GAAA,OAAAM,EAAAL,MAAA,KAAAC,UAAA,KAuB9ClD,EAA8C,CAClDG,cAAc,EACdD,aAAc2D,EACdzD,eAAgB,SAAC4I,EAAG/J,EAAM4B,EAAOoI,GAC/B,OAAOzE,EAAAA,EAAAA,KAACiC,EAAY,CAACxH,KAAMA,EAAM8C,SAAUlB,EAAO8F,QAASsC,GAC7D,EACAjJ,YAAa,CACX6G,UAAW,qBAGf,OACEC,EAAAA,EAAAA,MAAA,OAAKV,MAAO,CAAE8C,QAAS,IAAKpJ,SAAA,EAC1BgH,EAAAA,EAAAA,MAACzB,EAAAA,EAAI,CAAAvF,SAAA,EACH0E,EAAAA,EAAAA,KAACa,EAAAA,EAAKC,KAAI,CAACH,KAAK,SAASC,MAAM,eAAK+D,MAAO,CAAC,CAAEC,UAAU,IAAQtJ,UAC9D0E,EAAAA,EAAAA,KAAC6E,EAAAA,EAAK,OAER7E,EAAAA,EAAAA,KAAC8E,EAAU,CAACnE,KAAK,OAAOC,MAAM,eAAKF,cApBJ,CACnCiE,MAAO,CAAC,CAAEC,UAAU,KAmBiDpJ,YAAaA,EAAYF,SACvF,SAAAyJ,GAAO,OAAI/E,EAAAA,EAAAA,KAACgF,EAAAA,EAAM,CAACD,QAASA,EAAQzJ,SAAC,4BAAa,KAErD0E,EAAAA,EAAAA,KAACa,EAAAA,EAAKC,KAAI,CAAAxF,UACR0E,EAAAA,EAAAA,KAACgF,EAAAA,EAAM,CAACC,SAAS,SAAQ3J,SAAC,uBAG9B0E,EAAAA,EAAAA,KAAA,QAAMqC,UAAS,GAAAE,OAAK2C,EAAAA,QAAOC,UAAS,wBAAuB7J,SAAC,qBAC5D0E,EAAAA,EAAAA,KAAA,OAAKqC,UAAU,yBAAwB/G,SAAC,YAG9C,C,uDCtEI8J,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,y8DAA08D,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,gEAAgE,MAAQ,GAAG,SAAW,omBAAomB,eAAiB,CAAC,2mDAA2mD,WAAa,MAEl1I,K,uDCJIH,E,MAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,sKAAuK,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,0CAA0C,MAAQ,GAAG,SAAW,qDAAqD,eAAiB,CAAC,gJAAgJ,WAAa,MAE/gB,K,8BCNA,WAAgB,UAAY,yB,6JCUxBvE,EAAU,CAAC,EAEfA,EAAQC,kBAAoB,IAC5BD,EAAQE,cAAgB,IAElBF,EAAQG,OAAS,SAAc,KAAM,QAE3CH,EAAQI,OAAS,IACjBJ,EAAQK,mBAAqB,IAEhB,IAAI,IAASL,GAKnB,UAAe,KAAW,IAAQM,OAAS,IAAQA,YAASrG,C","sources":["utils/tools.ts","components/FormUpload/IUpload.tsx","components/FormUpload/index.tsx","webpack://cra/./src/components/FormUpload/Template/template.less?b5ab","components/FormUpload/Template/CardItem.tsx","pages/about/index.tsx","components/FormUpload/Template/template.less","pages/about/style.less","webpack://cra/./src/pages/about/style.module.css?68c1","webpack://cra/./src/pages/about/style.less?05aa"],"sourcesContent":["/**\n * 生成文件base64\n */\nexport const createFileBase64 = (file: File): Promise<[undefined, ProgressEvent<FileReader>] | [string, undefined]> => {\n  return new Promise(resolve => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve([reader.result as string, undefined]);\n    reader.onerror = error => resolve([void 0, error]);\n  });\n};\n","import { createFileBase64 } from '@/utils/tools';\nimport { Progress, Upload, UploadFile, UploadProps } from 'antd';\nimport { ItemRender } from 'antd/lib/upload/interface';\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\ntype RenderProps = (loadding: boolean) => React.ReactNode;\n\ntype LikeFile = {\n  uid: string;\n  url: string;\n  name: string;\n};\n\ntype IFile = Partial<LikeFile> & UploadFile;\n\ntype UploadInfo = {\n  file: IFile;\n  fileList: IFile[];\n};\n\nexport type IUploadProps = {\n  showProgress?: boolean;\n  children: React.ReactNode | RenderProps;\n  value?: IFile[];\n  onChange?: (fileList: IFile[]) => void;\n  uploadProps?: Omit<UploadProps, 'value' | 'onChange'>;\n  beforeChange?: (info: UploadInfo, updateProgress: (uid: string, nextPercent: number) => void) => Promise<void>;\n  templateRender?: ItemRender;\n};\n\nexport function isRenderProps(children: unknown): children is RenderProps {\n  return typeof children === 'function';\n}\n\nconst IUpload: React.FC<IUploadProps> = props => {\n  const { value, children, uploadProps = {}, onChange, beforeChange, showProgress, templateRender } = props;\n  const [loadding, setLoadding] = useState(false);\n  const [files, setFiles] = useState<IFile[]>();\n  const filesData = useRef(files);\n  /**\n   * 更新文件上传进度\n   * @param uid 文件uid\n   * @param percent 进度百分比\n   */\n  const updateProgress = (uid: string, percent: number) => {\n    if (showProgress && filesData.current) {\n      filesData.current.forEach(file => {\n        if (file.uid === uid) {\n          file.percent = percent;\n          file.status = percent === 100 ? 'success' : file.status;\n        }\n      });\n      setupFileList([...filesData.current]);\n      onChange?.(filesData.current);\n    }\n  };\n  const setFileBase64 = async (uid: string, fileList: IFile[]) => {\n    const targetFile = fileList.find(file => file.uid === uid);\n    if (targetFile && targetFile.originFileObj) {\n      const [url, err] = await createFileBase64(targetFile.originFileObj);\n      if (err) {\n        return console.error('base64生成失败');\n      }\n      targetFile.url = url;\n      targetFile.thumbUrl = url;\n    }\n  };\n  /**\n   * 拦截上传\n   * @description 可以在这里执行文件上传到服务器,上传进度更新等\n   */\n  const interceptorUpload = async ({ file, fileList }: UploadInfo) => {\n    let hasErr = false;\n    if (file.status !== 'removed') {\n      await setFileBase64(file.uid, fileList);\n    }\n    if (beforeChange) {\n      setLoadding(true);\n      try {\n        await beforeChange({ file, fileList }, updateProgress);\n      } catch (error) {\n        hasErr = true;\n      } finally {\n        setLoadding(false);\n      }\n    }\n    setFileStatus(file.uid, fileList, hasErr ? 'error' : 'done');\n    onChange?.(fileList);\n  };\n  /**\n   * 设置文件状态\n   * @param uid 文件uid\n   * @param fileList\n   * @param status\n   */\n  const setFileStatus = (uid: string, fileList: UploadFile[], status: UploadFile['status']) => {\n    fileList.forEach(file => {\n      if (file.uid === uid) {\n        file.status = status;\n      }\n    });\n  };\n  /**\n   * Upload onChange回调\n   */\n  const fileChangeHandle: UploadProps['onChange'] = async ({ file, fileList }) => {\n    fileList.forEach(fileItem => {\n      if (file.uid === fileItem.uid) {\n        fileItem.status = 'uploading';\n      }\n    });\n    setFileStatus(file.uid, fileList, 'uploading');\n    setupFileList(fileList);\n    filesData.current = fileList;\n    await interceptorUpload({ file, fileList });\n  };\n  /**\n   * 自定义上传\n   */\n  const beforUploadHandle: UploadProps['beforeUpload'] = () => {\n    return false;\n  };\n\n  /**\n   * 设置文件列表\n   * @description 由于React任务调度机制不能及时获取最新状态, 使用filesData存放最新数据\n   * @param fileList\n   */\n  const setupFileList = (fileList?: UploadFile[]) => {\n    filesData.current = fileList;\n    setFiles(fileList);\n  };\n\n  useEffect(() => {\n    setupFileList(value);\n  }, [value]);\n  const renderChildren = useMemo(() => {\n    if (isRenderProps(children)) {\n      return children(loadding);\n    }\n    return children;\n  }, [children, loadding]);\n  return (\n    <Upload\n      fileList={files}\n      beforeUpload={beforUploadHandle}\n      disabled={loadding}\n      onChange={fileChangeHandle}\n      {...uploadProps}\n      itemRender={\n        templateRender\n          ? templateRender\n          : (dom, file) => {\n              if (file.status === 'uploading' && showProgress) {\n                return <Progress percent={file.percent} type=\"dashboard\" />;\n              }\n              return dom;\n            }\n      }\n    >\n      {renderChildren}\n    </Upload>\n  );\n};\n\nexport default IUpload;\n","import { Form, FormItemProps } from 'antd';\nimport React from 'react';\nimport IUpload, { IUploadProps } from './IUpload';\n\nexport type FormUploadProps = {\n  formItemProps?: FormItemProps;\n  name?: string;\n  label?: string;\n  children: IUploadProps['children'];\n  uploadProps?: Omit<IUploadProps, 'children'>;\n};\n\nconst FormUpload: React.FC<FormUploadProps> = props => {\n  const { formItemProps = {}, name, label, children, uploadProps = {} } = props;\n  return (\n    <Form.Item {...formItemProps} name={name} label={label}>\n      <IUpload {...uploadProps}>{children}</IUpload>\n    </Form.Item>\n  );\n};\n\nexport default FormUpload;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[9].use[2]!./template.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[9].use[2]!./template.less\";\n       export default content && content.locals ? content.locals : undefined;\n","import React from 'react';\nimport { Image, UploadFile } from 'antd';\nimport {\n  FileZipOutlined,\n  FilePdfOutlined,\n  VideoCameraOutlined,\n  AudioOutlined,\n  FileTextOutlined,\n  DeleteOutlined,\n  DownloadOutlined\n} from '@ant-design/icons';\nimport './template.less';\n\nexport type ICardItemProps = {\n  file: UploadFile;\n  fileList: UploadFile[];\n  actions: {\n    download: () => void;\n    preview: () => void;\n    remove: () => void;\n  };\n  width?: number;\n  className?: string;\n};\nexport function getFileThumbUrl(fileType: string) {\n  const iconStyle: React.CSSProperties = {\n    fontSize: '56px'\n  };\n  const fileTypeThumbUrlMap = {\n    'application/zip': <FileZipOutlined style={iconStyle} />,\n    'application/pdf': <FilePdfOutlined style={iconStyle} />,\n    'video/mp4': <VideoCameraOutlined style={iconStyle} />,\n    'audio/mpeg': <AudioOutlined style={iconStyle} />\n  };\n  return fileTypeThumbUrlMap[fileType as keyof typeof fileTypeThumbUrlMap] || <FileTextOutlined style={iconStyle} />;\n}\nexport default function CardTemplate(props: ICardItemProps) {\n  const { file, actions, className = '' } = props;\n  return (\n    <div className={`upload-template-v1 ${className}`}>\n      <div className={`upload-template-wrap  ${file.status === 'error' ? 'upload-error-wrap' : ''}`}>\n        <div className=\"file-info-content\">\n          {file.url && file.type?.startsWith('image') ? <Image src={file.url} /> : getFileThumbUrl(file.type || '')}\n          <div className=\"file-info-wrap\">\n            <p className=\"file-name\" title={file.name}>\n              {file.name}\n            </p>\n            <span className=\"file-size\">{((file.size || 0) / 1000).toFixed(2)}K</span>\n          </div>\n        </div>\n        <div className=\"file-action-content\">\n          <div>\n            <DeleteOutlined style={{ fontSize: '18px', marginRight: 8 }} onClick={actions.remove} />\n            <DownloadOutlined style={{ fontSize: '18px' }} onClick={actions.download} />\n          </div>\n        </div>\n      </div>\n      <div\n        className=\"upload-template-progress-mask\"\n        style={{ display: file.status === 'uploading' ? 'block' : 'none' }}\n      >\n        <div className=\"progress-wrap\">\n          <div className=\"progress\" style={{ width: `${file.percent}%` }} />\n          <div className=\"progress-bar\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import FormUpload, { FormUploadProps } from '@/components/FormUpload';\nimport { IUploadProps } from '@/components/FormUpload/IUpload';\nimport CardTemplate from '@/components/FormUpload/Template/CardItem';\nimport { request } from '@/utils/request';\nimport { Button, Form, FormItemProps, Input, message } from 'antd';\nimport { RcFile } from 'antd/lib/upload';\n\nimport './style.less';\nimport styles from './style.module.css';\n\nexport default function About() {\n  const uploadFile = (file: RcFile, callback: (percent: number) => void) => {\n    const data = new FormData();\n    data.append('attachmentFile', file);\n    return request({\n      data,\n      method: 'POST',\n      onUploadProgress(event) {\n        callback(Math.floor((event.loaded / event.total) * 100));\n      },\n      url: '/gateway/admin/collection/pd/dataUpload/uploadFileNotSaveAttachmentFile'\n    });\n  };\n  const fileChangeHandle: IUploadProps['beforeChange'] = async ({ file, fileList }, updateProgress) => {\n    if (file.status === 'removed') {\n      return;\n    }\n    const data = new FormData();\n    data.append('attachmentFile', file.originFileObj || (file as RcFile));\n    const targetFile = fileList.find(curFile => curFile.uid === file.uid);\n    if (targetFile) {\n      try {\n        await uploadFile(targetFile.originFileObj || (file as RcFile), percent => {\n          updateProgress(file.uid, percent);\n        });\n        message.success('上传成功');\n      } catch (er) {\n        throw new Error('上传失败');\n      }\n    }\n  };\n\n  const formItemProps: FormItemProps = {\n    rules: [{ required: true }]\n    // templateRender: (params = {}) => <CardItem {...params}/>\n  };\n  const uploadProps: FormUploadProps['uploadProps'] = {\n    showProgress: true,\n    beforeChange: fileChangeHandle,\n    templateRender: (_, file, files, action) => {\n      return <CardTemplate file={file} fileList={files} actions={action} />;\n    },\n    uploadProps: {\n      className: 'upload-list-wrap'\n    }\n  };\n  return (\n    <div style={{ padding: 16 }}>\n      <Form>\n        <Form.Item name=\"number\" label=\"姓名\" rules={[{ required: true }]}>\n          <Input />\n        </Form.Item>\n        <FormUpload name=\"file\" label=\"文件\" formItemProps={formItemProps} uploadProps={uploadProps}>\n          {loading => <Button loading={loading}>上传文件</Button>}\n        </FormUpload>\n        <Form.Item>\n          <Button htmlType=\"submit\">提交</Button>\n        </Form.Item>\n      </Form>\n      <span className={`${styles.helloText} font-bold underline`}>hello every one</span>\n      <div className=\"bg-blue-500 bg-red-500\">click</div>\n    </div>\n  );\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".upload-template-v1 {\\n  position: relative;\\n  max-width: 100%;\\n  max-width: 400px;\\n  height: 98px;\\n  margin-top: 15px;\\n}\\n.upload-template-v1 .upload-error-wrap {\\n  border: 1px solid red;\\n}\\n.upload-template-v1 .upload-error-wrap .file-name {\\n  color: red !important;\\n}\\n.upload-template-v1 .upload-template-wrap {\\n  padding: 16px;\\n  border-radius: 8px;\\n  height: 100%;\\n  background: linear-gradient(219deg, #F9FAFD 0%, #F0F0F4 100%);\\n  display: flex;\\n  justify-content: space-between;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-info-content {\\n  display: flex;\\n  align-items: center;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-info-content .ant-image {\\n  width: 56px;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap {\\n  flex: 1;\\n  padding: 0px 10px;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap .file-name {\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  width: 200px;\\n  white-space: nowrap;\\n  font-size: 16px;\\n  font-weight: 400;\\n  color: #28323C;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-info-content > .file-info-wrap .file-size {\\n  color: #9CA8BA;\\n  font-size: 14px;\\n}\\n.upload-template-v1 .upload-template-wrap > .file-action-content {\\n  flex: 1;\\n  max-width: 50px;\\n  min-width: 50px;\\n  flex-grow: 0;\\n}\\n.upload-template-v1 .upload-template-progress-mask {\\n  height: 100%;\\n  width: 100%;\\n  top: 0px;\\n  position: absolute;\\n  border-radius: 8px;\\n  overflow: hidden;\\n}\\n.upload-template-v1 .upload-template-progress-mask .progress-wrap {\\n  height: 100%;\\n  display: flex;\\n}\\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress-bar {\\n  flex: 1;\\n  background: rgba(188, 188, 188, 0.4);\\n  height: 100%;\\n}\\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress,\\n.upload-template-v1 .upload-template-progress-mask .progress-wrap .progress-bar {\\n  transition: width 0.1s linear;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/FormUpload/Template/template.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAA;EACA,eAAA;EACA,gBAAA;EACA,YAAA;EACA,gBAAA;AACF;AANA;EAOI,qBAAA;AAEJ;AATA;EASM,qBAAA;AAGN;AAZA;EAaI,aAAA;EACA,kBAAA;EACA,YAAA;EACA,6DAAA;EACA,aAAA;EACA,8BAAA;AAEJ;AApBA;EAoBM,aAAA;EACA,mBAAA;AAGN;AAxBA;EAuBQ,WAAA;AAIR;AA3BA;EA0BQ,OAAA;EACA,iBAAA;AAIR;AA/BA;EA+BU,uBAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,eAAA;EACA,gBAAA;EACA,cAAA;AAGV;AAxCA;EAwCU,cAAA;EACA,eAAA;AAGV;AA5CA;EA+CM,OAAA;EACA,eAAA;EACA,eAAA;EACA,YAAA;AAAN;AAlDA;EAuDI,YAAA;EACA,WAAA;EACA,QAAA;EACA,kBAAA;EACA,kBAAA;EACA,gBAAA;AAFJ;AA1DA;EA8DM,YAAA;EACA,aAAA;AADN;AA9DA;EAiEQ,OAAA;EACA,oCAAA;EACA,YAAA;AAAR;AAnEA;;EAsEQ,6BAAA;AACR\",\"sourcesContent\":[\".upload-template-v1 {\\n  position: relative;\\n  max-width: 100%;\\n  max-width: 400px;\\n  height: 98px;\\n  margin-top: 15px;\\n  .upload-error-wrap {\\n    border: 1px solid red;\\n    .file-name {\\n      color: red !important;\\n    }\\n  }\\n  .upload-template-wrap {\\n    padding: 16px;\\n    border-radius: 8px;\\n    height: 100%;\\n    background: linear-gradient(219deg, #F9FAFD 0%, #F0F0F4 100%);\\n    display: flex;\\n    justify-content: space-between;\\n    >.file-info-content {\\n      display: flex;\\n      align-items: center;\\n      .ant-image {\\n        width: 56px;\\n      }\\n      >.file-info-wrap {\\n        flex: 1;\\n        padding: 0px 10px;\\n\\n        .file-name {\\n          // flex: 1;\\n          text-overflow: ellipsis;\\n          overflow: hidden;\\n          width: 200px;\\n          white-space: nowrap;\\n          font-size: 16px;\\n          font-weight: 400;\\n          color: #28323C;\\n        }\\n        .file-size {\\n          color: #9CA8BA;\\n          font-size: 14px;\\n        }\\n      }\\n    }\\n    >.file-action-content {\\n      // width: 80px;\\n      flex: 1;\\n      max-width: 50px;\\n      min-width: 50px;\\n      flex-grow: 0;\\n      // flex-shrink: 0;\\n    }\\n  }\\n  .upload-template-progress-mask {\\n    height: 100%;\\n    width: 100%;\\n    top: 0px;\\n    position: absolute;\\n    border-radius: 8px;\\n    overflow: hidden;\\n    .progress-wrap {\\n      height: 100%;\\n      display: flex;\\n      .progress-bar {\\n        flex: 1;\\n        background: rgba(188, 188, 188,.4);\\n        height: 100%;\\n      }\\n      .progress, .progress-bar {\\n        transition: width .1s linear;\\n      }\\n    }\\n  }\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".upload-list-wrap .ant-upload-list {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n.upload-list-wrap .ant-upload-list .upload-template-v1 {\\n  margin-right: 15px;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pages/about/style.less\"],\"names\":[],\"mappings\":\"AAAA;EAEE,aAAA;EACA,eAAA;AAAF;AAHA;EAKI,kBAAA;AACJ\",\"sourcesContent\":[\".upload-list-wrap {\\n .ant-upload-list {\\n  display: flex;\\n  flex-wrap: wrap;\\n  .upload-template-v1 {\\n    margin-right: 15px;\\n  }\\n }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// extracted by mini-css-extract-plugin\nexport default {\"helloText\":\"style_helloText__yy-c2\"};","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[9].use[2]!./style.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/less-loader/dist/cjs.js??ruleSet[1].rules[1].oneOf[9].use[2]!./style.less\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["createFileBase64","file","Promise","resolve","reader","FileReader","readAsDataURL","onload","result","undefined","onerror","error","props","value","children","_props$uploadProps","uploadProps","onChange","beforeChange","showProgress","templateRender","_useState","useState","_useState2","_slicedToArray","loadding","setLoadding","_useState3","_useState4","files","setFiles","filesData","useRef","updateProgress","uid","percent","current","forEach","status","setupFileList","_toConsumableArray","setFileBase64","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fileList","targetFile","_yield$createFileBase","_yield$createFileBase2","url","wrap","_context","prev","next","find","originFileObj","sent","abrupt","console","thumbUrl","stop","_x","_x2","apply","arguments","interceptorUpload","_ref3","_callee2","_ref2","hasErr","_context2","t0","finish","setFileStatus","_x3","fileChangeHandle","_ref5","_callee3","_ref4","_context3","fileItem","_x4","useEffect","renderChildren","useMemo","isRenderProps","_jsx","Upload","_objectSpread","beforeUpload","disabled","itemRender","dom","Progress","type","_props$formItemProps","formItemProps","name","label","Form","Item","IUpload","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","getFileThumbUrl","fileType","iconStyle","fontSize","FileZipOutlined","style","FilePdfOutlined","VideoCameraOutlined","AudioOutlined","FileTextOutlined","CardTemplate","_file$type","actions","_props$className","className","_jsxs","concat","startsWith","Image","src","title","size","toFixed","DeleteOutlined","marginRight","onClick","remove","DownloadOutlined","download","display","width","About","uploadFile","callback","data","FormData","append","request","method","onUploadProgress","event","Math","floor","loaded","total","curFile","message","success","Error","_","action","padding","rules","required","Input","FormUpload","loading","Button","htmlType","styles","helloText","___CSS_LOADER_EXPORT___","push","module","id"],"sourceRoot":""}